---
swagger: "2.0"
info:
  description: "Kipartman api specifications"
  version: "1.0.0"
  title: "Kipartman"
  termsOfService: "http://swagger.io/terms/"
  contact:
    name: "Sebastien Besombes"
    url: "https://github.com/turdusmerula/kipartman"
    email: "--"
  license:
    name: "GPL V3"
    url: "https://raw.githubusercontent.com/turdusmerula/kipartman/master/LICENSE"
host: "localhost:8200"
basePath: "/api"
schemes:
- "http"
consumes:
- "application/json"
produces:
- "application/json"
paths:
  /parts/categories:
    get:
      description: "Return all categories for parts"
      operationId: "find_parts_categories"
      parameters: []
      responses:
        200:
          description: "List of categories"
          schema:
            type: "array"
            items:
              $ref: "#/definitions/PartCategory"
        default:
          description: "unexpected error"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "swagger_server.controllers.default_controller"
    post:
      description: "Creates a new part category"
      operationId: "add_parts_category"
      parameters:
      - in: "body"
        name: "category"
        description: "Category to add"
        required: true
        schema:
          $ref: "#/definitions/PartCategoryNew"
      responses:
        200:
          description: "Created category"
          schema:
            $ref: "#/definitions/PartCategory"
        default:
          description: "unexpected error"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "swagger_server.controllers.default_controller"
  /parts/categories/{category_id}:
    get:
      description: "Return a part category"
      operationId: "find_parts_category"
      parameters:
      - name: "category_id"
        in: "path"
        description: "Category id"
        required: true
        type: "integer"
        format: "int64"
      responses:
        200:
          description: "Categories"
          schema:
            type: "array"
            items:
              $ref: "#/definitions/PartCategoryTree"
        default:
          description: "unexpected error"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "swagger_server.controllers.default_controller"
    put:
      description: "Update part category"
      operationId: "update_parts_category"
      parameters:
      - name: "category_id"
        in: "path"
        description: "Category id"
        required: true
        type: "integer"
        format: "int64"
      - in: "body"
        name: "category"
        description: "Category to update"
        required: true
        schema:
          $ref: "#/definitions/PartCategoryNew"
      responses:
        200:
          description: "Updated pärt category"
          schema:
            $ref: "#/definitions/PartCategory"
        default:
          description: "unexpected error"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "swagger_server.controllers.default_controller"
    delete:
      description: "Delete part category"
      operationId: "delete_parts_category"
      parameters:
      - name: "category_id"
        in: "path"
        description: "Category id"
        required: true
        type: "integer"
        format: "int64"
      responses:
        200:
          description: "Deleted ok"
        default:
          description: "unexpected error"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "swagger_server.controllers.default_controller"
  /parts:
    get:
      description: "Return all parts"
      operationId: "find_parts"
      parameters: []
      responses:
        200:
          description: "List of parts"
          schema:
            type: "array"
            items:
              $ref: "#/definitions/Part"
        default:
          description: "unexpected error"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "swagger_server.controllers.default_controller"
    post:
      description: "Creates a new part"
      operationId: "add_part"
      parameters:
      - in: "body"
        name: "part"
        description: "Part to add"
        required: true
        schema:
          $ref: "#/definitions/PartNew"
      responses:
        200:
          description: "Created part"
          schema:
            $ref: "#/definitions/Part"
        default:
          description: "unexpected error"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "swagger_server.controllers.default_controller"
  /parts/{part_id}:
    get:
      description: "Return a part"
      operationId: "find_part"
      parameters:
      - name: "part_id"
        in: "path"
        description: "Part id"
        required: true
        type: "integer"
        format: "int64"
      responses:
        200:
          description: "Categories"
          schema:
            type: "array"
            items:
              $ref: "#/definitions/PartTree"
        default:
          description: "unexpected error"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "swagger_server.controllers.default_controller"
    put:
      description: "Update part"
      operationId: "update_part"
      parameters:
      - name: "part_id"
        in: "path"
        description: "Part id"
        required: true
        type: "integer"
        format: "int64"
      - in: "body"
        name: "part"
        description: "Part to update"
        required: true
        schema:
          $ref: "#/definitions/PartNew"
      responses:
        200:
          description: "Updated pärt"
          schema:
            $ref: "#/definitions/Part"
        default:
          description: "unexpected error"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "swagger_server.controllers.default_controller"
    delete:
      description: "Delete part"
      operationId: "delete_part"
      parameters:
      - name: "part_id"
        in: "path"
        description: "Part id"
        required: true
        type: "integer"
        format: "int64"
      responses:
        200:
          description: "Deleted ok"
        default:
          description: "unexpected error"
          schema:
            $ref: "#/definitions/Error"
      x-swagger-router-controller: "swagger_server.controllers.default_controller"
definitions:
  PartCategory:
    allOf:
    - $ref: "#/definitions/PartCategoryData"
    - required:
      - "id"
      - "path"
      properties:
        id:
          type: "integer"
          format: "int64"
        path:
          type: "string"
        parent:
          $ref: "#/definitions/PartCategoryRef"
        childs:
          type: "array"
          items:
            $ref: "#/definitions/PartCategory"
  Error:
    type: "object"
    required:
    - "code"
    - "message"
    properties:
      code:
        type: "integer"
        format: "int32"
      message:
        type: "string"
  PartCategoryNew:
    allOf:
    - $ref: "#/definitions/PartCategoryData"
    - properties:
        parent:
          $ref: "#/definitions/PartCategoryRef"
  PartCategoryTree:
    allOf:
    - $ref: "#/definitions/PartCategoryData"
    - required:
      - "id"
      - "path"
      properties:
        id:
          type: "integer"
          format: "int64"
        path:
          type: "string"
        parent:
          $ref: "#/definitions/PartCategoryTree"
  Part:
    allOf:
    - $ref: "#/definitions/PartData"
    - required:
      - "id"
      properties:
        id:
          type: "integer"
          format: "int64"
        category:
          $ref: "#/definitions/PartCategoryRef"
        has_childs:
          type: "boolean"
  PartNew:
    allOf:
    - $ref: "#/definitions/PartData"
    - properties:
        category:
          $ref: "#/definitions/PartCategoryRef"
        childs:
          type: "array"
          items:
            $ref: "#/definitions/PartRef"
  PartTree:
    allOf:
    - $ref: "#/definitions/PartData"
    - required:
      - "id"
      properties:
        id:
          type: "integer"
          format: "int64"
        category:
          $ref: "#/definitions/PartCategoryTree"
        childs:
          type: "array"
          items:
            $ref: "#/definitions/PartTree"
        has_childs:
          type: "boolean"
  PartCategoryData:
    type: "object"
    required:
    - "name"
    properties:
      name:
        type: "string"
  PartData:
    type: "object"
    required:
    - "comment"
    - "description"
    - "name"
    properties:
      name:
        type: "string"
      description:
        type: "string"
      comment:
        type: "string"
      octopart:
        type: "string"
      updated:
        type: "string"
  PartCategoryRef:
    type: "object"
    required:
    - "id"
    properties:
      id:
        type: "integer"
        format: "int64"
  PartRef:
    type: "object"
    required:
    - "id"
    properties:
      id:
        type: "integer"
        format: "int64"
